<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>きょうのジグソーパズル ✨ Special Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Tailwind & Phaser -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-gradient-to-r from-purple-700 via-pink-600 to-blue-600 min-h-screen text-white">

  <!-- Start Screen -->
  <div id="start-screen" class="flex flex-col items-center justify-center min-h-screen">
    <h1 class="text-5xl font-bold mb-6">きょうのジグソーパズル</h1>

    <select id="piece-count" class="p-2 rounded bg-purple-800 mb-4">
      <option value="3x4">🌟 12ピース（かんたん）</option>
      <option value="4x5">⭐⭐ 20ピース（ふつう）</option>
      <option value="6x8">⭐⭐⭐ 48ピース（むずかしい）</option>
    </select>

    <input type="file" id="upload-image" accept="image/png, image/jpeg" class="mb-4 text-black">

    <button id="start-button" disabled class="bg-yellow-400 text-black px-6 py-3 rounded font-bold">
      🎮 はじめる！
    </button>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" class="hidden min-h-screen flex flex-col items-center">
    <h2 class="text-3xl mt-4 mb-2">🧩 のこり <span id="remaining-pieces">0</span> ピース</h2>
    <div id="game-container" class="w-full flex-1"></div>
  </div>

  <!-- Clear Screen -->
  <div id="game-clear-screen" class="hidden flex flex-col items-center justify-center min-h-screen">
    <h2 class="text-5xl font-bold mb-6">🎉 やったね！</h2>
    <button id="new-game" class="bg-green-400 text-black px-6 py-3 rounded font-bold">
      🔄 もういちど
    </button>
  </div>

  <!-- JS -->
  <script type="module">
    import { GameManager } from "./js/GameManager.js";
    import { UIManager } from "./js/UIManager.js";
    import { Effects } from "./js/Effects.js";

    const effects = new Effects();
    const uiManager = new UIManager(effects);
    const gameManager = new GameManager(uiManager, effects);

    document.getElementById("new-game").addEventListener("click", () => {
      uiManager.showScreen("start-screen");
    });
  </script>
</body>
</html>
