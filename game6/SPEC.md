# ゲーム仕様書: game6

## 概要
HTML/CSS/JavaScript で実装された反射神経測定ゲームです。画面の色が変わったら素早くクリックし、反応速度を計測します。測定モードとトレーニングモードを切り替えることができ、5 回の測定結果から平均反応時間を算出して評価を表示します。

## 画面構成
1. **ヘッダー**
   - タイトルと説明文を表示します【F:game6/index.html†L11-L14】。
2. **メイン**
   - 測定ゾーン (zone1〜zone3)。測定モードでは zone1 のみを表示します【F:game6/style.css†L674-L688】。
   - ゲーム状況を示すテキスト `#gameText` と進行状況 `#testStatus` を表示します【F:game6/index.html†L17-L33】。
   - スタート・リセットボタン、モード切替ボタンを配置します【F:game6/index.html†L33-L37】。
3. **結果表示セクション**
   - 各回の結果を `#resultsGrid` に一覧表示し、測定終了後に平均反応時間とランキングを表示します【F:game6/index.html†L40-L51】。
4. **フッター**
   - 評価基準を表形式で提示します【F:game6/index.html†L55-L74】。

## ゲームフロー
1. **開始**
   - スタートボタンでゲーム開始。結果や状態をリセットし `startNextTest()` を呼び出します【F:game6/app.js†L103-L114】。
2. **待機状態**
   - 各回は待機状態から始まり、ゾーンを赤色 (waiting) に設定します【F:game6/app.js†L125-L137】。
   - 2〜6 秒のランダムな待ち時間後に `startMeasurement()` を実行します【F:game6/app.js†L140-L146】。
3. **計測開始**
   - 待機解除後、ゾーンが緑色 (ready) になりクリックを受け付けます【F:game6/app.js†L148-L170】。
   - トレーニングモードでは 3 つのゾーンからランダムにターゲットを選択します【F:game6/app.js†L155-L167】。
4. **クリック判定**
   - 待機中にクリックするとフライングとして記録されます【F:game6/app.js†L173-L227】。
   - 準備完了後に正しいゾーンをクリックすると反応時間を計測します【F:game6/app.js†L183-L289】。
   - トレーニングモードで誤ったゾーンを押した場合はミスタッチ扱いとなります【F:game6/app.js†L188-L257】。
5. **結果処理**
   - 各回の結果をグリッドに追加し、5 回終了後に平均反応時間とランキングを計算して表示します【F:game6/app.js†L292-L349】。

## ゲーム設定
- 測定回数: 5 回【F:game6/app.js†L18-L21】
- 待機時間: 2000〜6000ms【F:game6/app.js†L18-L21】
- ランキング基準:
  - 優秀: 200ms 以下【F:game6/app.js†L7-L8】
  - 良好: 201–300ms【F:game6/app.js†L8-L9】
  - 平均: 301–400ms【F:game6/app.js†L9-L10】
  - 要改善: 401ms 以上【F:game6/app.js†L10-L11】

## その他仕様
- モード切替ボタンで測定モード・トレーニングモードを相互に変更します【F:game6/app.js†L88-L101】。
- フライングやミスタッチは平均計算から除外されます【F:game6/app.js†L327-L340】。
- 画面タッチによるダブルタップズームを無効化しています【F:game6/app.js†L414-L428】。
